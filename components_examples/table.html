<!DOCTYPE html>
<html lang="en" data-theme="modus-modern-light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>modus-wc-table - Examples</title>

    <!-- Modus component tokens & styles -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/moduswebcomponents/modus-wc-styles.css"
    />

    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Modus Icons -->
    <link
      rel="preload"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/modus-icons@latest/dist/modus-outlined/fonts/modus-icons.css"
      as="style"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/modus-icons@latest/dist/modus-outlined/fonts/modus-icons.css"
    />

    <!-- Google Fonts: Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />

    <!-- Shared QA Styles -->
    <link rel="stylesheet" href="../styles/modus-qa-styles.css" />

    <style>
      .example-row {
        padding: 2rem 0;
      }
      .example-row:first-child {
        padding-top: 0;
      }
      .example-row:last-child {
        padding-bottom: 0;
      }
    </style>
  </head>
  <body class="component-page">
    <div class="page-header">
      <h1>
        <i class="modus-icons">table_chart</i>
        modus-wc-table
      </h1>
      <p>
        Comprehensive examples and testing scenarios for the Modus Table
        component
      </p>
    </div>

    <!-- Interactive Demo -->
    <div class="section">
      <h2>
        <i class="modus-icons">settings</i>
        Interactive Demo
      </h2>

      <div class="interactive-demo">
        <modus-wc-table
          id="demo-table"
          aria-label="Interactive demo table"
          paginated
          density="comfortable"
          zebra
          selectable="multi"
          sortable
          hover
          show-page-size-selector
          page-size-options="[5,10,20]"
          current-page="1"
        >
        </modus-wc-table>
      </div>

      <div class="demo-controls">
        <div class="control-group">
          <label for="demo-pagination">Pagination:</label>
          <select id="demo-pagination" onchange="updateDemoTable()">
            <option value="true">Enabled</option>
            <option value="false">Disabled</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-density">Density:</label>
          <select id="demo-density" onchange="updateDemoTable()">
            <option value="comfortable">Comfortable</option>
            <option value="compact">Compact</option>
            <option value="relaxed">Relaxed</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-zebra">Zebra Striping:</label>
          <select id="demo-zebra" onchange="updateDemoTable()">
            <option value="true">Enabled</option>
            <option value="false">Disabled</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-selection">Selection Mode:</label>
          <select id="demo-selection" onchange="updateDemoTable()">
            <option value="none">None</option>
            <option value="single">Single</option>
            <option value="multi">Multi</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-sortable">Sortable:</label>
          <select id="demo-sortable" onchange="updateDemoTable()">
            <option value="true">Enabled</option>
            <option value="false">Disabled</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-hover">Hover Effect:</label>
          <select id="demo-hover" onchange="updateDemoTable()">
            <option value="true">Enabled</option>
            <option value="false">Disabled</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Basic Features -->
    <div class="section">
      <h2>
        <i class="modus-icons">palette</i>
        Basic Features
      </h2>

      <h3>Pagination</h3>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Pagination Example</h4>
          <modus-wc-table
            id="pagination-table"
            aria-label="Pagination example"
            paginated
            page-size-options="[5,10,20]"
            current-page="1"
          >
          </modus-wc-table>
        </div>
      </div>

      <h3>Selection Modes</h3>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Single Selection</h4>
          <modus-wc-table
            id="single-select-table"
            aria-label="Single selection example"
            selectable="single"
          >
          </modus-wc-table>
        </div>
      </div>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Multi Selection</h4>
          <modus-wc-table
            id="multi-select-table"
            aria-label="Multi selection example"
            selectable="multi"
          >
          </modus-wc-table>
        </div>
      </div>

      <h3>Density Options</h3>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Comfortable</h4>
          <modus-wc-table
            id="comfortable-table"
            aria-label="Comfortable density example"
            density="comfortable"
          >
          </modus-wc-table>
        </div>
      </div>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Compact</h4>
          <modus-wc-table
            id="compact-table"
            aria-label="Compact density example"
            density="compact"
          >
          </modus-wc-table>
        </div>
      </div>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Relaxed</h4>
          <modus-wc-table
            id="relaxed-table"
            aria-label="Relaxed density example"
            density="relaxed"
          >
          </modus-wc-table>
        </div>
      </div>
    </div>

    <!-- Advanced Features -->
    <div class="section">
      <h2>
        <i class="modus-icons">tune</i>
        Advanced Features
      </h2>

      <div class="example-row">
        <div class="example-item full-width">
          <h4>Sortable Columns</h4>
          <modus-wc-table
            id="sortable-table"
            aria-label="Sortable columns example"
            sortable
          >
          </modus-wc-table>
        </div>
      </div>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Zebra Striping</h4>
          <modus-wc-table
            id="zebra-table"
            aria-label="Zebra striping example"
            zebra
          >
          </modus-wc-table>
        </div>
      </div>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Hover Effects</h4>
          <modus-wc-table
            id="hover-table"
            aria-label="Hover effects example"
            hover
          >
          </modus-wc-table>
        </div>
      </div>
      <div class="example-row">
        <div class="example-item full-width">
          <h4>Inline Cell Editing</h4>
          <h5>(double click on cell to edit: Department and Status)</h5>
          <modus-wc-table
            id="editable-table"
            aria-label="Inline cell editing example"
            editable
          >
          </modus-wc-table>
        </div>
      </div>
    </div>

    <!-- Component Stats -->
    <div class="section">
      <h2>
        <i class="modus-icons">bar_graph</i>
        Component Statistics
      </h2>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">3</div>
          <div class="stat-label">Density Options</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">3</div>
          <div class="stat-label">Selection Modes</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">4</div>
          <div class="stat-label">Events</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">12</div>
          <div class="stat-label">Attributes</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">2</div>
          <div class="stat-label">Required Props</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">4</div>
          <div class="stat-label">Event Types</div>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script type="module">
      import { defineCustomElements } from "https://cdn.jsdelivr.net/npm/@trimble-oss/moduswebcomponents/loader/index.js";

      defineCustomElements().then(() => {
        // Sample data
        const employees = [
          {
            id: "1",
            name: "John Doe",
            role: "Software Engineer",
            department: "Engineering",
            status: "Active",
            joinDate: "2023-01-15",
          },
          {
            id: "2",
            name: "Jane Smith",
            role: "Product Manager",
            department: "Product",
            status: "Active",
            joinDate: "2023-02-20",
          },
          {
            id: "3",
            name: "Bob Johnson",
            role: "UX Designer",
            department: "Design",
            status: "On Leave",
            joinDate: "2023-03-10",
          },
          {
            id: "4",
            name: "Alice Brown",
            role: "QA Engineer",
            department: "Engineering",
            status: "Active",
            joinDate: "2023-04-05",
          },
          {
            id: "5",
            name: "Charlie Wilson",
            role: "DevOps Engineer",
            department: "Engineering",
            status: "Active",
            joinDate: "2023-05-12",
          },
          {
            id: "6",
            name: "Diana Miller",
            role: "Business Analyst",
            department: "Product",
            status: "Active",
            joinDate: "2023-06-18",
          },
          {
            id: "7",
            name: "Edward Davis",
            role: "Frontend Developer",
            department: "Engineering",
            status: "On Leave",
            joinDate: "2023-07-22",
          },
          {
            id: "8",
            name: "Fiona Clark",
            role: "Backend Developer",
            department: "Engineering",
            status: "Active",
            joinDate: "2023-08-30",
          },
          {
            id: "9",
            name: "George White",
            role: "Project Manager",
            department: "Product",
            status: "Active",
            joinDate: "2023-09-14",
          },
          {
            id: "10",
            name: "Hannah Lee",
            role: "UI Designer",
            department: "Design",
            status: "Active",
            joinDate: "2023-10-25",
          },
        ];

        // Column definitions for regular tables
        const columns = [
          {
            id: "id",
            header: "ID",
            accessor: "id",
            width: "80px",
            sortable: true,
          },
          { id: "name", header: "Name", accessor: "name", sortable: true },
          { id: "role", header: "Role", accessor: "role", sortable: true },
          {
            id: "department",
            header: "Department",
            accessor: "department",
            sortable: true,
          },
          {
            id: "status",
            header: "Status",
            accessor: "status",
            sortable: true,
          },
          {
            id: "joinDate",
            header: "Join Date",
            accessor: "joinDate",
            sortable: true,
          },
        ];

        // Column definitions for editable table
        const editableColumns = [
          { id: "id", header: "ID", accessor: "id", width: "80px" },
          { id: "name", header: "Name", accessor: "name", editor: "text" },
          { id: "role", header: "Role", accessor: "role", editor: "text" },
          {
            id: "department",
            header: "Department",
            accessor: "department",
            editor: "custom",
            customEditorRenderer: (value, onCommit) => {
              const select = document.createElement("modus-wc-select");
              select.options = [
                { label: "Engineering", value: "Engineering" },
                { label: "Product", value: "Product" },
                { label: "Design", value: "Design" },
              ];
              select.value = value;
              select.addEventListener("valueChange", (e) => onCommit(e.detail));
              return select;
            },
          },
          {
            id: "status",
            header: "Status",
            accessor: "status",
            editor: "custom",
            customEditorRenderer: (value, onCommit) => {
              const select = document.createElement("modus-wc-select");
              select.options = [
                { label: "Active", value: "Active" },
                { label: "On Leave", value: "On Leave" },
                { label: "Inactive", value: "Inactive" },
              ];
              select.value = value;
              select.addEventListener("valueChange", (e) => onCommit(e.detail));
              return select;
            },
          },
          {
            id: "joinDate",
            header: "Join Date",
            accessor: "joinDate",
            editor: "date",
          },
        ];

        // Initialize all tables
        const tables = document.querySelectorAll("modus-wc-table");
        tables.forEach((table) => {
          // Use editable columns for the editable table
          if (table.id === "editable-table") {
            table.columns = editableColumns;
          } else {
            table.columns = columns;
          }
          table.data = employees;

          // Add event listeners
          table.addEventListener("sortChange", (e) => {
            console.log("Sort changed:", e.detail);
          });

          table.addEventListener("paginationChange", (e) => {
            console.log("Pagination changed:", e.detail);
          });

          table.addEventListener("rowSelectionChange", (e) => {
            console.log("Selection changed:", e.detail);
          });

          // Add cell edit events for editable table
          if (table.id === "editable-table") {
            table.addEventListener("cellEditStart", (e) => {
              console.log("Cell edit started:", e.detail);
            });

            table.addEventListener("cellEditCommit", (e) => {
              console.log("Cell edit committed:", e.detail);
              // Update the data with the new value
              const { rowIndex, colId, newValue } = e.detail;
              const updatedData = [...table.data];
              updatedData[rowIndex] = {
                ...updatedData[rowIndex],
                [colId]: newValue,
              };
              table.data = updatedData;
            });
          }
        });

        // Sanity check
        console.log(
          "Table defined:",
          customElements.get("modus-wc-table") !== undefined
        );
      });
    </script>

    <script>
      // Interactive demo functionality
      function updateDemoTable() {
        const table = document.getElementById("demo-table");

        const paginated =
          document.getElementById("demo-pagination").value === "true";
        const density = document.getElementById("demo-density").value;
        const zebra = document.getElementById("demo-zebra").value === "true";
        const selection = document.getElementById("demo-selection").value;
        const sortable =
          document.getElementById("demo-sortable").value === "true";
        const hover = document.getElementById("demo-hover").value === "true";

        // Update table attributes
        table.paginated = paginated;
        table.density = density;
        table.zebra = zebra;
        table.selectable = selection;
        table.sortable = sortable;
        table.hover = hover;
      }

      // Make function global for HTML onchange attributes
      window.updateDemoTable = updateDemoTable;
    </script>
  </body>
</html>

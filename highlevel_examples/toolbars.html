<!DOCTYPE html>
<html lang="en" data-theme="modus-modern-light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toolbars - High Level Component Examples</title>

    <!-- Modus component tokens & styles -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/moduswebcomponents/modus-wc-styles.css"
    />

    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Modus Icons -->
    <link
      rel="preload"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/modus-icons@latest/dist/modus-outlined/fonts/modus-icons.css"
      as="style"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/modus-icons@latest/dist/modus-outlined/fonts/modus-icons.css"
    />

    <!-- Google Fonts: Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />

    <!-- Shared QA Styles -->
    <link rel="stylesheet" href="../styles/modus-qa-styles.css" />

    <!-- Modus Icons Library -->
    <script src="modus-icons.js"></script>

    <style>
      /* Theme-aware toolbar styles */
      .horizontal-toolbar {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 16px;
        background-color: var(--modus-color-bg-elevated);
        border: 1px solid var(--modus-color-border-subtle);
        border-radius: var(--modus-border-radius-md, 8px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin: 16px 0;
      }

      .vertical-toolbar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 16px 12px;
        background-color: var(--modus-color-bg-elevated);
        border: 1px solid var(--modus-color-border-subtle);
        border-radius: var(--modus-border-radius-md, 8px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        width: fit-content;
        margin: 16px 0;
      }

      .toolbar-compact {
        padding: 8px 12px;
        gap: 6px;
        border-radius: var(--modus-border-radius-sm, 4px);
      }

      .toolbar-elevated {
        background-color: var(--modus-color-bg-primary);
        color: var(--modus-color-text-inverted);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .toolbar-subtle {
        background-color: var(--modus-color-bg-subtle);
        border: 1px solid var(--modus-color-border);
        box-shadow: none;
      }

      .toolbar-group {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 4px;
        border-radius: var(--modus-border-radius-sm, 4px);
        background-color: var(--modus-color-bg-subtle-2);
      }

      .toolbar-separator {
        width: 1px;
        height: 24px;
        background-color: var(--modus-color-border-subtle);
        margin: 0 8px;
      }

      .vertical-separator {
        width: 24px;
        height: 1px;
        background-color: var(--modus-color-border-subtle);
        margin: 8px 0;
      }

      /* Custom modus-wc-toolbar styles */
      .app-toolbar {
        background-color: var(--modus-color-bg-elevated);
        padding: 12px 16px;
        border-radius: var(--modus-border-radius-md, 8px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin: 16px 0;
      }

      .action-toolbar {
        background-color: var(--modus-color-bg-subtle);
        padding: 8px 12px;
        border: 1px solid var(--modus-color-border);
        border-radius: var(--modus-border-radius-sm, 4px);
        margin: 16px 0;
      }

      .status-toolbar {
        background-color: var(--modus-color-bg-primary);
        color: var(--modus-color-text-inverted);
        padding: 10px 16px;
        border-radius: var(--modus-border-radius-lg, 12px);
        margin: 16px 0;
      }

      /* Custom Toolbar Builder Styles */
      .custom-toolbar-builder {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto auto;
        gap: 24px;
        margin-top: 24px;
      }

      .builder-controls {
        grid-column: 1 / -1;
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        padding: 16px;
        background-color: var(--modus-color-bg-subtle);
        border-radius: var(--modus-border-radius-md, 8px);
        border: 1px solid var(--modus-color-border);
      }

      .icon-selection {
        grid-column: 1;
      }

      .selected-buttons {
        grid-column: 2;
      }

      .toolbar-preview {
        grid-column: 1 / -1;
        padding: 16px;
        background-color: var(--modus-color-bg-elevated);
        border-radius: var(--modus-border-radius-md, 8px);
        border: 1px solid var(--modus-color-border-subtle);
      }

      .icon-search {
        margin-bottom: 16px;
      }

      .icon-search input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--modus-color-border);
        border-radius: var(--modus-border-radius-sm, 4px);
        font-size: 14px;
      }

      .icon-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: 8px;
        max-height: 300px;
        overflow-y: auto;
        padding: 12px;
        background-color: var(--modus-color-bg-subtle);
        border-radius: var(--modus-border-radius-sm, 4px);
        border: 1px solid var(--modus-color-border);
      }

      .icon-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 8px;
        border-radius: var(--modus-border-radius-sm, 4px);
        cursor: pointer;
        transition: background-color 0.2s ease;
        font-size: 12px;
        text-align: center;
      }

      .icon-item:hover {
        background-color: var(--modus-color-bg-elevated);
      }

      .icon-item.selected {
        background-color: var(--modus-color-bg-primary);
        color: var(--modus-color-text-inverted);
      }

      .icon-item i {
        font-size: 20px;
        margin-bottom: 4px;
      }

      .icon-item .icon-name {
        word-break: break-all;
        line-height: 1.2;
      }

      .button-list {
        min-height: 200px;
        padding: 12px;
        background-color: var(--modus-color-bg-subtle);
        border-radius: var(--modus-border-radius-sm, 4px);
        border: 1px solid var(--modus-color-border);
      }

      .button-list-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        margin-bottom: 8px;
        background-color: var(--modus-color-bg-elevated);
        border-radius: var(--modus-border-radius-sm, 4px);
        border: 1px solid var(--modus-color-border-subtle);
        transition: all 0.2s ease;
      }

      .button-list-item:hover {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .button-list-item.dragging {
        opacity: 0.5;
        transform: rotate(5deg);
      }

      .button-list-item .button-info {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .button-list-item .button-info i {
        font-size: 16px;
      }

      .button-list-item .button-label {
        font-size: 14px;
        font-weight: 500;
      }

      .button-list-item .button-controls {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .button-list-item .reorder-button,
      .button-list-item .remove-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 4px;
        border-radius: var(--modus-border-radius-sm, 4px);
        transition: background-color 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .button-list-item .reorder-button {
        color: var(--modus-color-text-primary);
      }

      .button-list-item .reorder-button:hover {
        background-color: var(--modus-color-bg-primary-subtle);
      }

      .button-list-item .reorder-button:disabled {
        color: var(--modus-color-text-disabled);
        cursor: not-allowed;
      }

      .button-list-item .reorder-button:disabled:hover {
        background-color: transparent;
      }

      .button-list-item .remove-button {
        color: var(--modus-color-text-danger);
      }

      .button-list-item .remove-button:hover {
        background-color: var(--modus-color-bg-danger-subtle);
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: var(--modus-color-text-subtle);
      }

      .drag-over {
        border-color: var(--modus-color-border-primary);
        background-color: var(--modus-color-bg-primary-subtle);
      }

      @media (max-width: 768px) {
        .custom-toolbar-builder {
          grid-template-columns: 1fr;
        }

        .icon-selection,
        .selected-buttons {
          grid-column: 1;
        }
      }
    </style>
  </head>
  <body class="component-page">
    <div class="page-header">
      <h1>Toolbars</h1>
      <p>
        High-level toolbar components built using atomic Modus Web Components.
        Explore different toolbar patterns and compositions for various use
        cases.
      </p>
    </div>

    <!-- Interactive Demo -->
    <div class="section">
      <h2>
        <i class="modus-icons">settings</i>
        Interactive Demo
      </h2>

      <div class="interactive-demo">
        <div class="horizontal-toolbar" id="demo-toolbar">
          <!-- Dynamic content will be generated by JavaScript -->
        </div>
      </div>

      <div class="demo-controls">
        <div class="control-group">
          <label for="demo-style">Toolbar Style:</label>
          <select id="demo-style" onchange="updateDemoToolbar()">
            <option value="default">Default</option>
            <option value="compact">Compact</option>
            <option value="elevated">Elevated</option>
            <option value="subtle">Subtle</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-orientation">Orientation:</label>
          <select id="demo-orientation" onchange="updateDemoToolbar()">
            <option value="horizontal">Horizontal</option>
            <option value="vertical">Vertical</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-variant">Button Variant:</label>
          <select id="demo-button-variant" onchange="updateDemoToolbar()">
            <option value="borderless">Borderless</option>
            <option value="filled">Filled</option>
            <option value="outlined">Outlined</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-color">Button Color:</label>
          <select id="demo-button-color" onchange="updateDemoToolbar()">
            <option value="primary">Primary</option>
            <option value="secondary">Secondary</option>
            <option value="tertiary">Tertiary</option>
            <option value="warning">Warning</option>
            <option value="danger">Danger</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-size">Button Size:</label>
          <select id="demo-button-size" onchange="updateDemoToolbar()">
            <option value="xs">Extra Small</option>
            <option value="sm" selected>Small</option>
            <option value="md">Medium</option>
            <option value="lg">Large</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-shape">Button Shape:</label>
          <select id="demo-button-shape" onchange="updateDemoToolbar()">
            <option value="circle" selected>Circle</option>
            <option value="square">Square</option>
            <option value="rectangle">Rectangle</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-type">Button Type:</label>
          <select id="demo-button-type" onchange="updateDemoToolbar()">
            <option value="icon-only" selected>Icon Only</option>
            <option value="icon-label">Icon + Label</option>
          </select>
        </div>

        <div class="control-group">
          <label>
            <input
              type="checkbox"
              id="demo-back-button"
              onchange="updateDemoToolbar()"
            />
            Show Back Button
          </label>
        </div>

        <div class="control-group">
          <label>
            <input
              type="checkbox"
              id="demo-close-button"
              onchange="updateDemoToolbar()"
            />
            Show Close Button
          </label>
        </div>
      </div>
    </div>

    <!-- Custom Toolbar Builder -->
    <div class="section">
      <h2>
        <i class="modus-icons">component</i>
        Custom Toolbar Builder
      </h2>
      <p>
        Create your own toolbar by selecting icons, button types, and arranging
        them in your preferred order.
      </p>

      <div class="custom-toolbar-builder">
        <!-- Builder Controls -->
        <div class="builder-controls">
          <div class="control-group">
            <label for="builder-button-type">Button Type:</label>
            <select id="builder-button-type" onchange="updateBuilderPreview()">
              <option value="icon-only">Icon Only</option>
              <option value="icon-label">Icon + Label</option>
            </select>
          </div>

          <div class="control-group">
            <label for="builder-button-variant">Button Variant:</label>
            <select
              id="builder-button-variant"
              onchange="updateBuilderPreview()"
            >
              <option value="borderless" selected>Borderless</option>
              <option value="filled">Filled</option>
              <option value="outlined">Outlined</option>
            </select>
          </div>

          <div class="control-group">
            <label for="builder-button-color">Button Color:</label>
            <select id="builder-button-color" onchange="updateBuilderPreview()">
              <option value="primary" selected>Primary</option>
              <option value="secondary">Secondary</option>
              <option value="tertiary">Tertiary</option>
              <option value="warning">Warning</option>
              <option value="danger">Danger</option>
            </select>
          </div>

          <div class="control-group">
            <label for="builder-button-size">Button Size:</label>
            <select id="builder-button-size" onchange="updateBuilderPreview()">
              <option value="xs">Extra Small</option>
              <option value="sm" selected>Small</option>
              <option value="md">Medium</option>
              <option value="lg">Large</option>
            </select>
          </div>

          <div class="control-group">
            <label for="builder-button-shape">Button Shape:</label>
            <select id="builder-button-shape" onchange="updateBuilderPreview()">
              <option value="circle" selected>Circle</option>
              <option value="square">Square</option>
              <option value="rectangle">Rectangle</option>
            </select>
          </div>

          <div class="control-group">
            <label for="builder-toolbar-style">Toolbar Style:</label>
            <select
              id="builder-toolbar-style"
              onchange="updateBuilderPreview()"
            >
              <option value="default" selected>Default</option>
              <option value="compact">Compact</option>
              <option value="elevated">Elevated</option>
              <option value="subtle">Subtle</option>
            </select>
          </div>
        </div>

        <!-- Preview -->
        <div class="toolbar-preview">
          <h4>Toolbar Preview</h4>
          <div class="horizontal-toolbar" id="custom-toolbar-preview">
            <!-- Preview will be generated by JavaScript -->
          </div>
        </div>

        <!-- Icon Selection -->
        <div class="icon-selection">
          <h4>Available Icons</h4>
          <div class="icon-search">
            <input
              type="text"
              id="icon-search"
              placeholder="Search icons..."
              oninput="filterIcons()"
            />
          </div>
          <div class="icon-grid" id="icon-grid">
            <!-- Icons will be populated by JavaScript -->
          </div>
        </div>

        <!-- Selected Buttons -->
        <div class="selected-buttons">
          <h4>Selected Buttons (Drag to reorder)</h4>
          <div class="button-list" id="selected-buttons">
            <div class="empty-state">
              <p>
                No buttons selected. Click icons above to add them to your
                toolbar.
              </p>
            </div>
          </div>
          <div style="margin-top: 12px">
            <modus-wc-button
              size="sm"
              variant="outlined"
              onclick="addSeparator()"
              aria-label="Add separator"
            >
              <i class="modus-icons" style="margin-right: 8px">more_vertical</i>
              Add Separator
            </modus-wc-button>
          </div>
        </div>
      </div>
    </div>

    <!-- Horizontal Toolbars -->
    <div class="section">
      <h2>
        <i class="modus-icons">view_horizontal</i>
        Horizontal Toolbars (DIV Approach)
      </h2>

      <div class="example-item">
        <h4>Basic Action Toolbar</h4>
        <p>
          Common document editing actions with separators for logical grouping.
        </p>
        <div class="horizontal-toolbar">
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="New document"
          >
            <i class="modus-icons">add</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Open document"
          >
            <i class="modus-icons">folder_open</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Save document"
          >
            <i class="modus-icons">save_disk</i>
          </modus-wc-button>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Undo"
          >
            <i class="modus-icons">undo</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Redo"
          >
            <i class="modus-icons">redo</i>
          </modus-wc-button>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Print"
          >
            <i class="modus-icons">printer</i>
          </modus-wc-button>
        </div>
      </div>

      <div class="example-item">
        <h4>Media Controls Toolbar</h4>
        <p>Video/audio player controls with play state management.</p>
        <div class="horizontal-toolbar">
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Previous track"
          >
            <i class="modus-icons">fast_rewind</i>
          </modus-wc-button>
          <modus-wc-button
            size="md"
            color="primary"
            shape="circle"
            aria-label="Play"
          >
            <i class="modus-icons">play_circle</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Next track"
          >
            <i class="modus-icons">fast_forward</i>
          </modus-wc-button>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Volume down"
          >
            <i class="modus-icons">volume_down</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Mute"
          >
            <i class="modus-icons">volume_mute</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Volume up"
          >
            <i class="modus-icons">volume_up</i>
          </modus-wc-button>
        </div>
      </div>

      <div class="example-item">
        <h4>Formatting Toolbar</h4>
        <p>Text formatting controls with grouped buttons and toggle states.</p>
        <div class="horizontal-toolbar">
          <div class="toolbar-group">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Bold"
            >
              <i class="modus-icons">text_bold</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Italic"
            >
              <i class="modus-icons">text_italic</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Underline"
            >
              <i class="modus-icons">text_underlined</i>
            </modus-wc-button>
          </div>
          <div class="toolbar-separator"></div>
          <div class="toolbar-group">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Align left"
            >
              <i class="modus-icons">text_align_left</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Align center"
            >
              <i class="modus-icons">text_centered</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Align right"
            >
              <i class="modus-icons">text_align_right</i>
            </modus-wc-button>
          </div>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="square"
            aria-label="Color picker"
          >
            <i class="modus-icons">color_picker</i>
          </modus-wc-button>
        </div>
      </div>
    </div>

    <!-- Vertical Toolbars -->
    <div class="section">
      <h2>
        <i class="modus-icons">view_list</i>
        Vertical Toolbars (DIV Approach)
      </h2>

      <div class="flex-row" style="align-items: flex-start; gap: 2rem">
        <div class="example-item">
          <h4>Design Tools Palette</h4>
          <p>Vertical toolbar for design applications with tool selection.</p>
          <div class="vertical-toolbar">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Select tool"
            >
              <i class="modus-icons">cursor</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              color="primary"
              shape="circle"
              aria-label="Pen tool"
              pressed
            >
              <i class="modus-icons">pen</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Brush tool"
            >
              <i class="modus-icons">brush</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Eraser tool"
            >
              <i class="modus-icons">eraser</i>
            </modus-wc-button>
            <div class="vertical-separator"></div>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Rectangle tool"
            >
              <i class="modus-icons">frame</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Circle tool"
            >
              <i class="modus-icons">circle_outline</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Text tool"
            >
              <i class="modus-icons">text_input</i>
            </modus-wc-button>
          </div>
        </div>

        <div class="example-item">
          <h4>Navigation Sidebar</h4>
          <p>Vertical navigation with icons and active state indication.</p>
          <div class="vertical-toolbar">
            <modus-wc-button
              size="md"
              color="primary"
              shape="circle"
              aria-label="Dashboard"
              pressed
            >
              <i class="modus-icons">dashboard</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Projects"
            >
              <i class="modus-icons">folder_open</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Team"
            >
              <i class="modus-icons">people_group</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Calendar"
            >
              <i class="modus-icons">calendar</i>
            </modus-wc-button>
            <div class="vertical-separator"></div>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Settings"
            >
              <i class="modus-icons">settings</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Help"
            >
              <i class="modus-icons">help</i>
            </modus-wc-button>
          </div>
        </div>

        <div class="example-item">
          <h4>Quick Actions Panel</h4>
          <p>Compact vertical toolbar for frequently used actions.</p>
          <div class="vertical-toolbar toolbar-compact">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Add new"
            >
              <i class="modus-icons">add</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Search"
            >
              <i class="modus-icons">search</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Filter"
            >
              <i class="modus-icons">filter</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Sort"
            >
              <i class="modus-icons">sort</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="More options"
            >
              <i class="modus-icons">more_vertical</i>
            </modus-wc-button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modus WC Toolbar Examples -->
    <div class="section">
      <h2>
        <i class="modus-icons">component</i>
        Using modus-wc-toolbar Component
      </h2>

      <div class="example-item">
        <h4>Action Toolbar</h4>
        <p>Secondary toolbar for page-specific actions and controls.</p>
        <modus-wc-toolbar
          custom-class="action-toolbar"
          aria-label="Page actions"
        >
          <div slot="start" class="flex items-center gap-2">
            <modus-wc-badge variant="solid" color="success"
              >Active</modus-wc-badge
            >
            <span class="text-sm text-gray-600"
              >Last updated 5 minutes ago</span
            >
          </div>
          <div slot="end" class="flex items-center gap-2">
            <modus-wc-button size="sm" variant="borderless">
              <i class="modus-icons">refresh</i>
              Refresh
            </modus-wc-button>
            <modus-wc-button size="sm" variant="outlined">
              <i class="modus-icons">export</i>
              Export
            </modus-wc-button>
            <modus-wc-button size="sm" color="primary">
              <i class="modus-icons">add</i>
              New Item
            </modus-wc-button>
          </div>
        </modus-wc-toolbar>
      </div>

      <div class="example-item">
        <h4>Status Toolbar</h4>
        <p>Prominent status display with important system information.</p>
        <modus-wc-toolbar
          custom-class="status-toolbar"
          aria-label="System status"
        >
          <div slot="start" class="flex items-center gap-2">
            <i class="modus-icons">check_circle</i>
            <span class="font-semibold">System Online</span>
          </div>
          <div slot="center" class="flex items-center gap-4">
            <div class="flex items-center gap-1">
              <i class="modus-icons">signal</i>
              <span class="text-sm">Connection: Strong</span>
            </div>
            <div class="flex items-center gap-1">
              <i class="modus-icons">sync</i>
              <span class="text-sm">Sync: Active</span>
            </div>
          </div>
          <div slot="end" class="flex items-center gap-2">
            <span class="text-sm">v2.1.0</span>
            <modus-wc-button
              size="sm"
              variant="borderless"
              color="secondary"
              aria-label="System info"
            >
              <i class="modus-icons">info</i>
            </modus-wc-button>
          </div>
        </modus-wc-toolbar>
      </div>
    </div>

    <!-- Component Composition -->
    <div class="section">
      <h2>
        <i class="modus-icons">layers</i>
        Component Composition
      </h2>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">3</div>
          <div class="stat-label">Implementation Approaches</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">15+</div>
          <div class="stat-label">Icon Examples</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">2</div>
          <div class="stat-label">Orientations</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">4</div>
          <div class="stat-label">Style Variants</div>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script type="module">
      import { defineCustomElements } from "https://cdn.jsdelivr.net/npm/@trimble-oss/moduswebcomponents/loader/index.js";
      defineCustomElements();
    </script>

    <script>
      // Interactive demo functionality
      let activeButton = null;
      let activeButtonId = null;

      // Define toolbar button configurations
      const toolbarButtons = [
        { id: "new", icon: "add", label: "New", ariaLabel: "New document" },
        {
          id: "save",
          icon: "save_disk",
          label: "Save",
          ariaLabel: "Save document",
        },
        { id: "cut", icon: "scissors", label: "Cut", ariaLabel: "Cut" },
        { id: "copy", icon: "copy_content", label: "Copy", ariaLabel: "Copy" },
        { id: "paste", icon: "clipboard", label: "Paste", ariaLabel: "Paste" },
      ];

      function createButton(
        config,
        variant,
        color,
        size,
        shape,
        buttonType,
        isActive = false
      ) {
        const button = document.createElement("modus-wc-button");
        button.setAttribute("data-button-id", config.id);
        button.setAttribute("variant", isActive ? "filled" : variant);
        button.setAttribute("color", isActive ? "primary" : color);
        button.setAttribute("size", size);
        button.setAttribute(
          "shape",
          buttonType === "icon-label" ? "rectangle" : shape
        );
        button.setAttribute("aria-label", config.ariaLabel);

        if (isActive) {
          button.setAttribute("pressed", "true");
        }

        // Create button content
        if (buttonType === "icon-only") {
          button.innerHTML = `<i class="modus-icons">${config.icon}</i>`;
        } else {
          button.innerHTML = `<i class="modus-icons" style="margin-right: 8px">${config.icon}</i>${config.label}`;
        }

        return button;
      }

      function createSeparator(orientation) {
        const separator = document.createElement("div");
        separator.className =
          orientation === "vertical"
            ? "vertical-separator"
            : "toolbar-separator";
        return separator;
      }

      function updateDemoToolbar() {
        const toolbar = document.getElementById("demo-toolbar");
        const style = document.getElementById("demo-style").value;
        const orientation = document.getElementById("demo-orientation").value;
        const buttonVariant = document.getElementById(
          "demo-button-variant"
        ).value;
        const buttonColor = document.getElementById("demo-button-color").value;
        const buttonSize = document.getElementById("demo-button-size").value;
        const buttonShape = document.getElementById("demo-button-shape").value;
        const buttonType = document.getElementById("demo-button-type").value;
        const showBackButton =
          document.getElementById("demo-back-button").checked;
        const showCloseButton =
          document.getElementById("demo-close-button").checked;

        // Clear toolbar
        toolbar.innerHTML = "";
        console.log("Toolbar cleared");

        // Reset classes
        toolbar.className = "";
        console.log("Toolbar classes reset");

        // Apply orientation
        if (orientation === "vertical") {
          toolbar.className = "vertical-toolbar";
        } else {
          toolbar.className = "horizontal-toolbar";
        }

        // Apply style modifier
        if (style !== "default") {
          toolbar.classList.add(`toolbar-${style}`);
        }

        // Add back button if enabled
        if (showBackButton) {
          const backButtonContent =
            buttonType === "icon-only"
              ? '<i class="modus-icons">arrow_back</i>'
              : '<i class="modus-icons" style="margin-right: 8px">arrow_back</i>Back';
          console.log(
            "Back button content:",
            backButtonContent,
            "Type:",
            buttonType
          );

          const backButtonShape =
            buttonType === "icon-only" ? buttonShape : "rectangle";
          const backButtonHTML =
            "<modus-wc-button " +
            'data-button-id="back" ' +
            'variant="' +
            buttonVariant +
            '" ' +
            'color="' +
            buttonColor +
            '" ' +
            'size="' +
            buttonSize +
            '" ' +
            'shape="' +
            backButtonShape +
            '" ' +
            'aria-label="Go back">' +
            backButtonContent +
            "</modus-wc-button>";

          toolbar.insertAdjacentHTML("beforeend", backButtonHTML);
          console.log("Back button added via innerHTML:", backButtonHTML);

          // Add separator after back button
          toolbar.appendChild(createSeparator(orientation));
          console.log("Separator after back button added");
        }

        // Add main toolbar buttons
        console.log("Adding main toolbar buttons...");
        toolbarButtons.forEach((config, index) => {
          const isActive = activeButtonId === config.id;
          const buttonContent =
            buttonType === "icon-only"
              ? '<i class="modus-icons">' + config.icon + "</i>"
              : '<i class="modus-icons" style="margin-right: 8px">' +
                config.icon +
                "</i>" +
                config.label;
          console.log(
            "Main button content for",
            config.id,
            ":",
            buttonContent,
            "Type:",
            buttonType
          );

          const buttonShapeToUse =
            buttonType === "icon-only" ? buttonShape : "rectangle";
          const buttonVariantToUse = isActive ? "filled" : buttonVariant;
          const buttonColorToUse = isActive ? "primary" : buttonColor;
          const pressedAttr = isActive ? ' pressed="true"' : "";

          const buttonHTML =
            "<modus-wc-button " +
            'data-button-id="' +
            config.id +
            '" ' +
            'variant="' +
            buttonVariantToUse +
            '" ' +
            'color="' +
            buttonColorToUse +
            '" ' +
            'size="' +
            buttonSize +
            '" ' +
            'shape="' +
            buttonShapeToUse +
            '" ' +
            'aria-label="' +
            config.ariaLabel +
            '"' +
            pressedAttr +
            ">" +
            buttonContent +
            "</modus-wc-button>";

          toolbar.insertAdjacentHTML("beforeend", buttonHTML);
          console.log("Main button added:", config.id, buttonHTML);

          // Add separator after first two buttons
          if (index === 1) {
            toolbar.appendChild(createSeparator(orientation));
          }
        });

        // Add close button if enabled
        if (showCloseButton) {
          // Add separator before close button
          toolbar.appendChild(createSeparator(orientation));

          const closeButtonContent =
            buttonType === "icon-only"
              ? '<i class="modus-icons">close</i>'
              : '<i class="modus-icons" style="margin-right: 8px">close</i>Close';
          console.log(
            "Close button content:",
            closeButtonContent,
            "Type:",
            buttonType
          );

          const closeButtonShape =
            buttonType === "icon-only" ? buttonShape : "rectangle";
          const closeButtonHTML =
            "<modus-wc-button " +
            'data-button-id="close" ' +
            'variant="' +
            buttonVariant +
            '" ' +
            'color="danger" ' +
            'size="' +
            buttonSize +
            '" ' +
            'shape="' +
            closeButtonShape +
            '" ' +
            'aria-label="Close">' +
            closeButtonContent +
            "</modus-wc-button>";

          toolbar.insertAdjacentHTML("beforeend", closeButtonHTML);
          console.log("Close button added via innerHTML:", closeButtonHTML);
        }

        // Reattach event listeners to new buttons
        console.log("Final toolbar content:", toolbar.innerHTML);
        console.log("Toolbar children count:", toolbar.children.length);

        // Use setTimeout to ensure components are properly rendered
        setTimeout(() => {
          attachDemoEventListeners();
        }, 100);
      }

      function setActiveButton(button) {
        const buttonId = button.getAttribute("data-button-id");

        // Don't set back or close buttons as active
        if (buttonId === "back" || buttonId === "close") {
          // Just provide visual feedback
          const originalColor = button.getAttribute("color");
          button.setAttribute("color", "success");
          setTimeout(() => {
            button.setAttribute("color", originalColor);
          }, 150);
          return;
        }

        // Clear previous active button
        if (activeButtonId && activeButtonId !== buttonId) {
          const previousActiveButton = document.querySelector(
            `[data-button-id="${activeButtonId}"]`
          );
          if (previousActiveButton) {
            const buttonColor =
              document.getElementById("demo-button-color").value;
            const buttonVariant = document.getElementById(
              "demo-button-variant"
            ).value;
            previousActiveButton.setAttribute("color", buttonColor);
            previousActiveButton.setAttribute("variant", buttonVariant);
            previousActiveButton.removeAttribute("pressed");
          }
        }

        // Set new active button
        activeButton = button;
        activeButtonId = buttonId;
        button.setAttribute("color", "primary");
        button.setAttribute("variant", "filled");
        button.setAttribute("pressed", "true");
      }

      function attachDemoEventListeners() {
        const demoToolbar = document.getElementById("demo-toolbar");
        const demoButtons = demoToolbar.querySelectorAll("modus-wc-button");

        demoButtons.forEach((button) => {
          button.addEventListener("buttonClick", function (e) {
            console.log(
              "Demo toolbar button clicked:",
              button.getAttribute("data-button-id")
            );
            setActiveButton(button);
          });
        });
      }

      // Add click event listeners for demo purposes
      document.addEventListener("DOMContentLoaded", function () {
        // Handle button clicks in other toolbars (non-demo)
        document.querySelectorAll("modus-wc-button").forEach((button) => {
          // Skip demo toolbar buttons as they're handled dynamically
          const demoToolbar = document.getElementById("demo-toolbar");
          if (!demoToolbar.contains(button)) {
            button.addEventListener("buttonClick", function (e) {
              console.log("Toolbar button clicked:", e.target);

              // Visual feedback for clicked button
              const originalColor = button.getAttribute("color") || "primary";

              // Brief highlight effect
              button.setAttribute("color", "success");
              setTimeout(() => {
                button.setAttribute("color", originalColor);
              }, 150);
            });
          }
        });

        // Initialize demo
        updateDemoToolbar();

        // Initialize custom toolbar builder
        initializeCustomBuilder();
      });

      // Make function global for HTML onchange attributes
      window.updateDemoToolbar = updateDemoToolbar;

      // Custom Toolbar Builder functionality
      // Load icons from external file
      const availableIcons = window.MODUS_ICONS || [];

      let selectedButtons = [];
      let activeBuilderButton = null;
      let activeBuilderButtonId = null;

      function initializeCustomBuilder() {
        // Debug: Check if icons loaded properly
        console.log("Available icons count:", availableIcons.length);
        if (availableIcons.length === 0) {
          console.warn(
            "No icons loaded! Check if modus-icons.js is loaded properly."
          );
        }

        populateIconGrid();
        // Ensure the preview toolbar has the correct initial styling
        const preview = document.getElementById("custom-toolbar-preview");
        if (preview) {
          preview.className = "horizontal-toolbar";
          console.log(
            "Custom toolbar preview initialized with class:",
            preview.className
          );
        }
        updateBuilderPreview();
      }

      function populateIconGrid() {
        const iconGrid = document.getElementById("icon-grid");
        iconGrid.innerHTML = "";

        if (availableIcons.length === 0) {
          iconGrid.innerHTML =
            '<div style="grid-column: 1 / -1; text-align: center; padding: 20px; color: var(--modus-color-text-danger);">Error: No icons available. Please check if modus-icons.js is loaded.</div>';
          return;
        }

        availableIcons.forEach((iconName) => {
          const iconItem = document.createElement("div");
          iconItem.className = "icon-item";
          iconItem.setAttribute("data-icon", iconName);

          const iconElement = document.createElement("i");
          iconElement.className = "modus-icons";
          iconElement.textContent = iconName;

          const iconNameElement = document.createElement("div");
          iconNameElement.className = "icon-name";
          iconNameElement.textContent = iconName.replace(/_/g, " ");

          iconItem.appendChild(iconElement);
          iconItem.appendChild(iconNameElement);

          iconItem.addEventListener("click", () => addIconToToolbar(iconName));

          iconGrid.appendChild(iconItem);
        });
      }

      function filterIcons() {
        const searchTerm = document
          .getElementById("icon-search")
          .value.toLowerCase();
        const iconItems = document.querySelectorAll(".icon-item");

        iconItems.forEach((item) => {
          const iconName = item.getAttribute("data-icon");
          const isVisible = iconName.toLowerCase().includes(searchTerm);
          item.style.display = isVisible ? "flex" : "none";
        });
      }

      function addIconToToolbar(iconName) {
        // Check if icon is already selected
        if (selectedButtons.find((btn) => btn.icon === iconName)) {
          return;
        }

        const buttonData = {
          id: `custom-${Date.now()}`,
          type: "button",
          icon: iconName,
          label: iconName
            .replace(/_/g, " ")
            .replace(/\b\w/g, (l) => l.toUpperCase()),
          ariaLabel: iconName.replace(/_/g, " "),
        };

        selectedButtons.push(buttonData);
        updateSelectedButtonsList();
        updateBuilderPreview();
        updateIconSelection();
      }

      function addSeparator() {
        const separatorData = {
          id: `separator-${Date.now()}`,
          type: "separator",
          label: "Separator",
        };

        selectedButtons.push(separatorData);
        updateSelectedButtonsList();
        updateBuilderPreview();
      }

      function updateIconSelection() {
        const iconItems = document.querySelectorAll(".icon-item");
        iconItems.forEach((item) => {
          const iconName = item.getAttribute("data-icon");
          const isSelected = selectedButtons.find(
            (btn) => btn.type === "button" && btn.icon === iconName
          );
          item.classList.toggle("selected", !!isSelected);
        });
      }

      function updateSelectedButtonsList() {
        const buttonList = document.getElementById("selected-buttons");

        if (selectedButtons.length === 0) {
          buttonList.innerHTML =
            '<div class="empty-state"><p>No buttons selected. Click icons above to add them to your toolbar.</p></div>';
          return;
        }

        buttonList.innerHTML = "";

        selectedButtons.forEach((item, index) => {
          const listItem = document.createElement("div");
          listItem.className = "button-list-item";
          listItem.setAttribute("data-index", index);

          const isFirst = index === 0;
          const isLast = index === selectedButtons.length - 1;

          if (item.type === "separator") {
            listItem.innerHTML = `
              <div class="button-info">
                <i class="modus-icons">more_vertical</i>
                <span class="button-label">${item.label}</span>
              </div>
              <div class="button-controls">
                <button class="reorder-button" onclick="moveButton(${index}, -1)" ${
              isFirst ? "disabled" : ""
            } aria-label="Move separator up">
                  <i class="modus-icons">chevron_up</i>
                </button>
                <button class="reorder-button" onclick="moveButton(${index}, 1)" ${
              isLast ? "disabled" : ""
            } aria-label="Move separator down">
                  <i class="modus-icons">chevron_down</i>
                </button>
                <button class="remove-button" onclick="removeButton(${index})" aria-label="Remove separator">
                  <i class="modus-icons">close</i>
                </button>
              </div>
            `;
          } else {
            listItem.innerHTML = `
              <div class="button-info">
                <i class="modus-icons">${item.icon}</i>
                <span class="button-label">${item.label}</span>
              </div>
              <div class="button-controls">
                <button class="reorder-button" onclick="moveButton(${index}, -1)" ${
              isFirst ? "disabled" : ""
            } aria-label="Move button up">
                  <i class="modus-icons">chevron_up</i>
                </button>
                <button class="reorder-button" onclick="moveButton(${index}, 1)" ${
              isLast ? "disabled" : ""
            } aria-label="Move button down">
                  <i class="modus-icons">chevron_down</i>
                </button>
                <button class="remove-button" onclick="removeButton(${index})" aria-label="Remove button">
                  <i class="modus-icons">close</i>
                </button>
              </div>
            `;
          }

          buttonList.appendChild(listItem);
        });
      }

      function removeButton(index) {
        selectedButtons.splice(index, 1);
        updateSelectedButtonsList();
        updateBuilderPreview();
        updateIconSelection();
      }

      function moveButton(index, direction) {
        const newIndex = index + direction;

        // Check bounds
        if (newIndex < 0 || newIndex >= selectedButtons.length) {
          return;
        }

        // Swap buttons
        const temp = selectedButtons[index];
        selectedButtons[index] = selectedButtons[newIndex];
        selectedButtons[newIndex] = temp;

        updateSelectedButtonsList();
        updateBuilderPreview();
      }

      function updateBuilderPreview() {
        const preview = document.getElementById("custom-toolbar-preview");
        const buttonType = document.getElementById("builder-button-type").value;
        const buttonVariant = document.getElementById(
          "builder-button-variant"
        ).value;
        const buttonColor = document.getElementById(
          "builder-button-color"
        ).value;
        const buttonSize = document.getElementById("builder-button-size").value;
        const buttonShape = document.getElementById(
          "builder-button-shape"
        ).value;
        const toolbarStyle = document.getElementById(
          "builder-toolbar-style"
        ).value;

        // Clear toolbar (same as demo)
        preview.innerHTML = "";

        // Reset classes (same as demo)
        preview.className = "";

        // Apply orientation (always horizontal for builder)
        preview.className = "horizontal-toolbar";

        // Apply style modifier (same as demo)
        if (toolbarStyle !== "default") {
          preview.classList.add(`toolbar-${toolbarStyle}`);
        }

        // Debug: Log the applied classes
        console.log("Builder preview classes applied:", preview.className);
        console.log("Builder toolbar style:", toolbarStyle);

        if (selectedButtons.length === 0) {
          preview.innerHTML =
            '<p style="text-align: center; color: var(--modus-color-text-subtle); padding: 20px;">Your custom toolbar will appear here</p>';
          return;
        }

        selectedButtons.forEach((item, index) => {
          if (item.type === "separator") {
            // Add separator element using createSeparator function (same as demo)
            preview.appendChild(createSeparator("horizontal"));
          } else {
            // Add button element using same approach as demo
            const buttonContent =
              buttonType === "icon-only"
                ? '<i class="modus-icons">' + item.icon + "</i>"
                : '<i class="modus-icons" style="margin-right: 8px">' +
                  item.icon +
                  "</i>" +
                  item.label;

            const buttonShapeToUse =
              buttonType === "icon-only" ? buttonShape : "rectangle";

            // Check if this button should be active
            const isActive = activeBuilderButtonId === item.id;
            const buttonVariantToUse = isActive ? "filled" : buttonVariant;
            const buttonColorToUse = isActive ? "primary" : buttonColor;
            const pressedAttr = isActive ? ' pressed="true"' : "";

            const buttonHTML =
              "<modus-wc-button " +
              'data-button-id="' +
              item.id +
              '" ' +
              'variant="' +
              buttonVariantToUse +
              '" ' +
              'color="' +
              buttonColorToUse +
              '" ' +
              'size="' +
              buttonSize +
              '" ' +
              'shape="' +
              buttonShapeToUse +
              '" ' +
              'aria-label="' +
              item.ariaLabel +
              '"' +
              pressedAttr +
              ">" +
              buttonContent +
              "</modus-wc-button>";

            preview.insertAdjacentHTML("beforeend", buttonHTML);
          }
        });

        // Add event listeners to preview buttons (same timeout approach as demo)
        setTimeout(() => {
          attachBuilderEventListeners();
        }, 100);
      }

      function setActiveBuilderButton(button) {
        const buttonId = button.getAttribute("data-button-id");

        // Clear previous active button
        if (activeBuilderButtonId && activeBuilderButtonId !== buttonId) {
          const previousActiveButton = document.querySelector(
            `#custom-toolbar-preview [data-button-id="${activeBuilderButtonId}"]`
          );
          if (previousActiveButton) {
            const buttonColor = document.getElementById(
              "builder-button-color"
            ).value;
            const buttonVariant = document.getElementById(
              "builder-button-variant"
            ).value;
            previousActiveButton.setAttribute("color", buttonColor);
            previousActiveButton.setAttribute("variant", buttonVariant);
            previousActiveButton.removeAttribute("pressed");
          }
        }

        // Set new active button
        activeBuilderButton = button;
        activeBuilderButtonId = buttonId;
        button.setAttribute("color", "primary");
        button.setAttribute("variant", "filled");
        button.setAttribute("pressed", "true");
      }

      function attachBuilderEventListeners() {
        const builderToolbar = document.getElementById(
          "custom-toolbar-preview"
        );
        const builderButtons =
          builderToolbar.querySelectorAll("modus-wc-button");

        builderButtons.forEach((button) => {
          button.addEventListener("buttonClick", function (e) {
            console.log(
              "Builder toolbar button clicked:",
              button.getAttribute("data-button-id")
            );
            setActiveBuilderButton(button);
          });
        });
      }

      // Make functions global
      window.updateBuilderPreview = updateBuilderPreview;
      window.filterIcons = filterIcons;
      window.removeButton = removeButton;
      window.moveButton = moveButton;
      window.addSeparator = addSeparator;
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en" data-theme="modus-modern-light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toolbars - High Level Component Examples</title>

    <!-- Modus component tokens & styles -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/moduswebcomponents/modus-wc-styles.css"
    />

    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Modus Icons -->
    <link
      rel="preload"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/modus-icons@latest/dist/modus-outlined/fonts/modus-icons.css"
      as="style"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@trimble-oss/modus-icons@latest/dist/modus-outlined/fonts/modus-icons.css"
    />

    <!-- Google Fonts: Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />

    <!-- Shared QA Styles -->
    <link rel="stylesheet" href="../styles/modus-qa-styles.css" />

    <style>
      /* Theme-aware toolbar styles */
      .horizontal-toolbar {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 16px;
        background-color: var(--modus-color-bg-elevated);
        border: 1px solid var(--modus-color-border-subtle);
        border-radius: var(--modus-border-radius-md, 8px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin: 16px 0;
      }

      .vertical-toolbar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 16px 12px;
        background-color: var(--modus-color-bg-elevated);
        border: 1px solid var(--modus-color-border-subtle);
        border-radius: var(--modus-border-radius-md, 8px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        width: fit-content;
        margin: 16px 0;
      }

      .toolbar-compact {
        padding: 8px 12px;
        gap: 6px;
        border-radius: var(--modus-border-radius-sm, 4px);
      }

      .toolbar-elevated {
        background-color: var(--modus-color-bg-primary);
        color: var(--modus-color-text-inverted);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .toolbar-subtle {
        background-color: var(--modus-color-bg-subtle);
        border: 1px solid var(--modus-color-border);
        box-shadow: none;
      }

      .toolbar-group {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 4px;
        border-radius: var(--modus-border-radius-sm, 4px);
        background-color: var(--modus-color-bg-subtle-2);
      }

      .toolbar-separator {
        width: 1px;
        height: 24px;
        background-color: var(--modus-color-border-subtle);
        margin: 0 8px;
      }

      .vertical-separator {
        width: 24px;
        height: 1px;
        background-color: var(--modus-color-border-subtle);
        margin: 8px 0;
      }

      /* Custom modus-wc-toolbar styles */
      .app-toolbar {
        background-color: var(--modus-color-bg-elevated);
        padding: 12px 16px;
        border-radius: var(--modus-border-radius-md, 8px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin: 16px 0;
      }

      .action-toolbar {
        background-color: var(--modus-color-bg-subtle);
        padding: 8px 12px;
        border: 1px solid var(--modus-color-border);
        border-radius: var(--modus-border-radius-sm, 4px);
        margin: 16px 0;
      }

      .status-toolbar {
        background-color: var(--modus-color-bg-primary);
        color: var(--modus-color-text-inverted);
        padding: 10px 16px;
        border-radius: var(--modus-border-radius-lg, 12px);
        margin: 16px 0;
      }
    </style>
  </head>
  <body class="component-page">
    <div class="page-header">
      <h1>Toolbars</h1>
      <p>
        High-level toolbar components built using atomic Modus Web Components.
        Explore different toolbar patterns and compositions for various use
        cases.
      </p>
    </div>

    <!-- Interactive Demo -->
    <div class="section">
      <h2>
        <i class="modus-icons">settings</i>
        Interactive Demo
      </h2>

      <div class="interactive-demo">
        <div class="horizontal-toolbar" id="demo-toolbar">
          <!-- Dynamic content will be generated by JavaScript -->
        </div>
      </div>

      <div class="demo-controls">
        <div class="control-group">
          <label for="demo-style">Toolbar Style:</label>
          <select id="demo-style" onchange="updateDemoToolbar()">
            <option value="default">Default</option>
            <option value="compact">Compact</option>
            <option value="elevated">Elevated</option>
            <option value="subtle">Subtle</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-orientation">Orientation:</label>
          <select id="demo-orientation" onchange="updateDemoToolbar()">
            <option value="horizontal">Horizontal</option>
            <option value="vertical">Vertical</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-variant">Button Variant:</label>
          <select id="demo-button-variant" onchange="updateDemoToolbar()">
            <option value="borderless">Borderless</option>
            <option value="filled">Filled</option>
            <option value="outlined">Outlined</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-color">Button Color:</label>
          <select id="demo-button-color" onchange="updateDemoToolbar()">
            <option value="primary">Primary</option>
            <option value="secondary">Secondary</option>
            <option value="tertiary">Tertiary</option>
            <option value="warning">Warning</option>
            <option value="danger">Danger</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-size">Button Size:</label>
          <select id="demo-button-size" onchange="updateDemoToolbar()">
            <option value="xs">Extra Small</option>
            <option value="sm" selected>Small</option>
            <option value="md">Medium</option>
            <option value="lg">Large</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-shape">Button Shape:</label>
          <select id="demo-button-shape" onchange="updateDemoToolbar()">
            <option value="circle" selected>Circle</option>
            <option value="square">Square</option>
            <option value="rectangle">Rectangle</option>
          </select>
        </div>

        <div class="control-group">
          <label for="demo-button-type">Button Type:</label>
          <select id="demo-button-type" onchange="updateDemoToolbar()">
            <option value="icon-only" selected>Icon Only</option>
            <option value="icon-label">Icon + Label</option>
          </select>
        </div>

        <div class="control-group">
          <label>
            <input
              type="checkbox"
              id="demo-back-button"
              onchange="updateDemoToolbar()"
            />
            Show Back Button
          </label>
        </div>

        <div class="control-group">
          <label>
            <input
              type="checkbox"
              id="demo-close-button"
              onchange="updateDemoToolbar()"
            />
            Show Close Button
          </label>
        </div>
      </div>
    </div>

    <!-- Horizontal Toolbars -->
    <div class="section">
      <h2>
        <i class="modus-icons">view_horizontal</i>
        Horizontal Toolbars (DIV Approach)
      </h2>

      <div class="example-item">
        <h4>Basic Action Toolbar</h4>
        <p>
          Common document editing actions with separators for logical grouping.
        </p>
        <div class="horizontal-toolbar">
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="New document"
          >
            <i class="modus-icons">add</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Open document"
          >
            <i class="modus-icons">folder_open</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Save document"
          >
            <i class="modus-icons">save_disk</i>
          </modus-wc-button>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Undo"
          >
            <i class="modus-icons">undo</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Redo"
          >
            <i class="modus-icons">redo</i>
          </modus-wc-button>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Print"
          >
            <i class="modus-icons">printer</i>
          </modus-wc-button>
        </div>
      </div>

      <div class="example-item">
        <h4>Media Controls Toolbar</h4>
        <p>Video/audio player controls with play state management.</p>
        <div class="horizontal-toolbar">
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Previous track"
          >
            <i class="modus-icons">fast_rewind</i>
          </modus-wc-button>
          <modus-wc-button
            size="md"
            color="primary"
            shape="circle"
            aria-label="Play"
          >
            <i class="modus-icons">play_circle</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Next track"
          >
            <i class="modus-icons">fast_forward</i>
          </modus-wc-button>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Volume down"
          >
            <i class="modus-icons">volume_down</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Mute"
          >
            <i class="modus-icons">volume_mute</i>
          </modus-wc-button>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="circle"
            aria-label="Volume up"
          >
            <i class="modus-icons">volume_up</i>
          </modus-wc-button>
        </div>
      </div>

      <div class="example-item">
        <h4>Formatting Toolbar</h4>
        <p>Text formatting controls with grouped buttons and toggle states.</p>
        <div class="horizontal-toolbar">
          <div class="toolbar-group">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Bold"
            >
              <i class="modus-icons">text_bold</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Italic"
            >
              <i class="modus-icons">text_italic</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Underline"
            >
              <i class="modus-icons">text_underlined</i>
            </modus-wc-button>
          </div>
          <div class="toolbar-separator"></div>
          <div class="toolbar-group">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Align left"
            >
              <i class="modus-icons">text_align_left</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Align center"
            >
              <i class="modus-icons">text_centered</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="square"
              aria-label="Align right"
            >
              <i class="modus-icons">text_align_right</i>
            </modus-wc-button>
          </div>
          <div class="toolbar-separator"></div>
          <modus-wc-button
            size="sm"
            variant="borderless"
            shape="square"
            aria-label="Color picker"
          >
            <i class="modus-icons">color_picker</i>
          </modus-wc-button>
        </div>
      </div>
    </div>

    <!-- Vertical Toolbars -->
    <div class="section">
      <h2>
        <i class="modus-icons">view_list</i>
        Vertical Toolbars (DIV Approach)
      </h2>

      <div class="flex-row" style="align-items: flex-start; gap: 2rem">
        <div class="example-item">
          <h4>Design Tools Palette</h4>
          <p>Vertical toolbar for design applications with tool selection.</p>
          <div class="vertical-toolbar">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Select tool"
            >
              <i class="modus-icons">cursor</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              color="primary"
              shape="circle"
              aria-label="Pen tool"
              pressed
            >
              <i class="modus-icons">pen</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Brush tool"
            >
              <i class="modus-icons">brush</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Eraser tool"
            >
              <i class="modus-icons">eraser</i>
            </modus-wc-button>
            <div class="vertical-separator"></div>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Rectangle tool"
            >
              <i class="modus-icons">frame</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Circle tool"
            >
              <i class="modus-icons">circle_outline</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Text tool"
            >
              <i class="modus-icons">text_input</i>
            </modus-wc-button>
          </div>
        </div>

        <div class="example-item">
          <h4>Navigation Sidebar</h4>
          <p>Vertical navigation with icons and active state indication.</p>
          <div class="vertical-toolbar">
            <modus-wc-button
              size="md"
              color="primary"
              shape="circle"
              aria-label="Dashboard"
              pressed
            >
              <i class="modus-icons">dashboard</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Projects"
            >
              <i class="modus-icons">folder_open</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Team"
            >
              <i class="modus-icons">people_group</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Calendar"
            >
              <i class="modus-icons">calendar</i>
            </modus-wc-button>
            <div class="vertical-separator"></div>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Settings"
            >
              <i class="modus-icons">settings</i>
            </modus-wc-button>
            <modus-wc-button
              size="md"
              variant="borderless"
              shape="circle"
              aria-label="Help"
            >
              <i class="modus-icons">help</i>
            </modus-wc-button>
          </div>
        </div>

        <div class="example-item">
          <h4>Quick Actions Panel</h4>
          <p>Compact vertical toolbar for frequently used actions.</p>
          <div class="vertical-toolbar toolbar-compact">
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Add new"
            >
              <i class="modus-icons">add</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Search"
            >
              <i class="modus-icons">search</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Filter"
            >
              <i class="modus-icons">filter</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="Sort"
            >
              <i class="modus-icons">sort</i>
            </modus-wc-button>
            <modus-wc-button
              size="sm"
              variant="borderless"
              shape="circle"
              aria-label="More options"
            >
              <i class="modus-icons">more_vertical</i>
            </modus-wc-button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modus WC Toolbar Examples -->
    <div class="section">
      <h2>
        <i class="modus-icons">component</i>
        Using modus-wc-toolbar Component
      </h2>

      <div class="example-item">
        <h4>Action Toolbar</h4>
        <p>Secondary toolbar for page-specific actions and controls.</p>
        <modus-wc-toolbar
          custom-class="action-toolbar"
          aria-label="Page actions"
        >
          <div slot="start" class="flex items-center gap-2">
            <modus-wc-badge variant="solid" color="success"
              >Active</modus-wc-badge
            >
            <span class="text-sm text-gray-600"
              >Last updated 5 minutes ago</span
            >
          </div>
          <div slot="end" class="flex items-center gap-2">
            <modus-wc-button size="sm" variant="borderless">
              <i class="modus-icons">refresh</i>
              Refresh
            </modus-wc-button>
            <modus-wc-button size="sm" variant="outlined">
              <i class="modus-icons">export</i>
              Export
            </modus-wc-button>
            <modus-wc-button size="sm" color="primary">
              <i class="modus-icons">add</i>
              New Item
            </modus-wc-button>
          </div>
        </modus-wc-toolbar>
      </div>

      <div class="example-item">
        <h4>Status Toolbar</h4>
        <p>Prominent status display with important system information.</p>
        <modus-wc-toolbar
          custom-class="status-toolbar"
          aria-label="System status"
        >
          <div slot="start" class="flex items-center gap-2">
            <i class="modus-icons">check_circle</i>
            <span class="font-semibold">System Online</span>
          </div>
          <div slot="center" class="flex items-center gap-4">
            <div class="flex items-center gap-1">
              <i class="modus-icons">signal</i>
              <span class="text-sm">Connection: Strong</span>
            </div>
            <div class="flex items-center gap-1">
              <i class="modus-icons">sync</i>
              <span class="text-sm">Sync: Active</span>
            </div>
          </div>
          <div slot="end" class="flex items-center gap-2">
            <span class="text-sm">v2.1.0</span>
            <modus-wc-button
              size="sm"
              variant="borderless"
              color="secondary"
              aria-label="System info"
            >
              <i class="modus-icons">info</i>
            </modus-wc-button>
          </div>
        </modus-wc-toolbar>
      </div>

 

    <!-- Component Composition -->
    <div class="section">
      <h2>
        <i class="modus-icons">layers</i>
        Component Composition
      </h2>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">3</div>
          <div class="stat-label">Implementation Approaches</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">15+</div>
          <div class="stat-label">Icon Examples</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">2</div>
          <div class="stat-label">Orientations</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">4</div>
          <div class="stat-label">Style Variants</div>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script type="module">
      import { defineCustomElements } from "https://cdn.jsdelivr.net/npm/@trimble-oss/moduswebcomponents/loader/index.js";
      defineCustomElements();
    </script>

    <script>
      // Interactive demo functionality
      let activeButton = null;
      let activeButtonId = null;

      // Define toolbar button configurations
      const toolbarButtons = [
        { id: "new", icon: "add", label: "New", ariaLabel: "New document" },
        {
          id: "save",
          icon: "save_disk",
          label: "Save",
          ariaLabel: "Save document",
        },
        { id: "cut", icon: "scissors", label: "Cut", ariaLabel: "Cut" },
        { id: "copy", icon: "copy_content", label: "Copy", ariaLabel: "Copy" },
        { id: "paste", icon: "clipboard", label: "Paste", ariaLabel: "Paste" },
      ];

      function createButton(
        config,
        variant,
        color,
        size,
        shape,
        buttonType,
        isActive = false
      ) {
        const button = document.createElement("modus-wc-button");
        button.setAttribute("data-button-id", config.id);
        button.setAttribute("variant", isActive ? "filled" : variant);
        button.setAttribute("color", isActive ? "primary" : color);
        button.setAttribute("size", size);
        button.setAttribute(
          "shape",
          buttonType === "icon-label" ? "rectangle" : shape
        );
        button.setAttribute("aria-label", config.ariaLabel);

        if (isActive) {
          button.setAttribute("pressed", "true");
        }

        // Create button content
        if (buttonType === "icon-only") {
          button.innerHTML = `<i class="modus-icons">${config.icon}</i>`;
        } else {
          button.innerHTML = `<i class="modus-icons" style="margin-right: 8px">${config.icon}</i>${config.label}`;
        }

        return button;
      }

      function createSeparator(orientation) {
        const separator = document.createElement("div");
        separator.className =
          orientation === "vertical"
            ? "vertical-separator"
            : "toolbar-separator";
        return separator;
      }

      function updateDemoToolbar() {
        const toolbar = document.getElementById("demo-toolbar");
        const style = document.getElementById("demo-style").value;
        const orientation = document.getElementById("demo-orientation").value;
        const buttonVariant = document.getElementById(
          "demo-button-variant"
        ).value;
        const buttonColor = document.getElementById("demo-button-color").value;
        const buttonSize = document.getElementById("demo-button-size").value;
        const buttonShape = document.getElementById("demo-button-shape").value;
        const buttonType = document.getElementById("demo-button-type").value;
        const showBackButton =
          document.getElementById("demo-back-button").checked;
        const showCloseButton =
          document.getElementById("demo-close-button").checked;

        // Clear toolbar
        toolbar.innerHTML = "";
        console.log("Toolbar cleared");

        // Reset classes
        toolbar.className = "";
        console.log("Toolbar classes reset");

        // Apply orientation
        if (orientation === "vertical") {
          toolbar.className = "vertical-toolbar";
        } else {
          toolbar.className = "horizontal-toolbar";
        }

        // Apply style modifier
        if (style !== "default") {
          toolbar.classList.add(`toolbar-${style}`);
        }

        // Add back button if enabled
        if (showBackButton) {
          const backButtonContent =
            buttonType === "icon-only"
              ? '<i class="modus-icons">arrow_back</i>'
              : '<i class="modus-icons" style="margin-right: 8px">arrow_back</i>Back';
          console.log(
            "Back button content:",
            backButtonContent,
            "Type:",
            buttonType
          );

          const backButtonShape =
            buttonType === "icon-only" ? buttonShape : "rectangle";
          const backButtonHTML =
            "<modus-wc-button " +
            'data-button-id="back" ' +
            'variant="' +
            buttonVariant +
            '" ' +
            'color="' +
            buttonColor +
            '" ' +
            'size="' +
            buttonSize +
            '" ' +
            'shape="' +
            backButtonShape +
            '" ' +
            'aria-label="Go back">' +
            backButtonContent +
            "</modus-wc-button>";

          toolbar.insertAdjacentHTML("beforeend", backButtonHTML);
          console.log("Back button added via innerHTML:", backButtonHTML);

          // Add separator after back button
          toolbar.appendChild(createSeparator(orientation));
          console.log("Separator after back button added");
        }

        // Add main toolbar buttons
        console.log("Adding main toolbar buttons...");
        toolbarButtons.forEach((config, index) => {
          const isActive = activeButtonId === config.id;
          const buttonContent =
            buttonType === "icon-only"
              ? '<i class="modus-icons">' + config.icon + "</i>"
              : '<i class="modus-icons" style="margin-right: 8px">' +
                config.icon +
                "</i>" +
                config.label;
          console.log(
            "Main button content for",
            config.id,
            ":",
            buttonContent,
            "Type:",
            buttonType
          );

          const buttonShapeToUse =
            buttonType === "icon-only" ? buttonShape : "rectangle";
          const buttonVariantToUse = isActive ? "filled" : buttonVariant;
          const buttonColorToUse = isActive ? "primary" : buttonColor;
          const pressedAttr = isActive ? ' pressed="true"' : "";

          const buttonHTML =
            "<modus-wc-button " +
            'data-button-id="' +
            config.id +
            '" ' +
            'variant="' +
            buttonVariantToUse +
            '" ' +
            'color="' +
            buttonColorToUse +
            '" ' +
            'size="' +
            buttonSize +
            '" ' +
            'shape="' +
            buttonShapeToUse +
            '" ' +
            'aria-label="' +
            config.ariaLabel +
            '"' +
            pressedAttr +
            ">" +
            buttonContent +
            "</modus-wc-button>";

          toolbar.insertAdjacentHTML("beforeend", buttonHTML);
          console.log("Main button added:", config.id, buttonHTML);

          // Add separator after first two buttons
          if (index === 1) {
            toolbar.appendChild(createSeparator(orientation));
          }
        });

        // Add close button if enabled
        if (showCloseButton) {
          // Add separator before close button
          toolbar.appendChild(createSeparator(orientation));

          const closeButtonContent =
            buttonType === "icon-only"
              ? '<i class="modus-icons">close</i>'
              : '<i class="modus-icons" style="margin-right: 8px">close</i>Close';
          console.log(
            "Close button content:",
            closeButtonContent,
            "Type:",
            buttonType
          );

          const closeButtonShape =
            buttonType === "icon-only" ? buttonShape : "rectangle";
          const closeButtonHTML =
            "<modus-wc-button " +
            'data-button-id="close" ' +
            'variant="' +
            buttonVariant +
            '" ' +
            'color="danger" ' +
            'size="' +
            buttonSize +
            '" ' +
            'shape="' +
            closeButtonShape +
            '" ' +
            'aria-label="Close">' +
            closeButtonContent +
            "</modus-wc-button>";

          toolbar.insertAdjacentHTML("beforeend", closeButtonHTML);
          console.log("Close button added via innerHTML:", closeButtonHTML);
        }

        // Reattach event listeners to new buttons
        console.log("Final toolbar content:", toolbar.innerHTML);
        console.log("Toolbar children count:", toolbar.children.length);

        // Use setTimeout to ensure components are properly rendered
        setTimeout(() => {
          attachDemoEventListeners();
        }, 100);
      }

      function setActiveButton(button) {
        const buttonId = button.getAttribute("data-button-id");

        // Don't set back or close buttons as active
        if (buttonId === "back" || buttonId === "close") {
          // Just provide visual feedback
          const originalColor = button.getAttribute("color");
          button.setAttribute("color", "success");
          setTimeout(() => {
            button.setAttribute("color", originalColor);
          }, 150);
          return;
        }

        // Clear previous active button
        if (activeButtonId && activeButtonId !== buttonId) {
          const previousActiveButton = document.querySelector(
            `[data-button-id="${activeButtonId}"]`
          );
          if (previousActiveButton) {
            const buttonColor =
              document.getElementById("demo-button-color").value;
            const buttonVariant = document.getElementById(
              "demo-button-variant"
            ).value;
            previousActiveButton.setAttribute("color", buttonColor);
            previousActiveButton.setAttribute("variant", buttonVariant);
            previousActiveButton.removeAttribute("pressed");
          }
        }

        // Set new active button
        activeButton = button;
        activeButtonId = buttonId;
        button.setAttribute("color", "primary");
        button.setAttribute("variant", "filled");
        button.setAttribute("pressed", "true");
      }

      function attachDemoEventListeners() {
        const demoToolbar = document.getElementById("demo-toolbar");
        const demoButtons = demoToolbar.querySelectorAll("modus-wc-button");

        demoButtons.forEach((button) => {
          button.addEventListener("buttonClick", function (e) {
            console.log(
              "Demo toolbar button clicked:",
              button.getAttribute("data-button-id")
            );
            setActiveButton(button);
          });
        });
      }

      // Add click event listeners for demo purposes
      document.addEventListener("DOMContentLoaded", function () {
        // Handle button clicks in other toolbars (non-demo)
        document.querySelectorAll("modus-wc-button").forEach((button) => {
          // Skip demo toolbar buttons as they're handled dynamically
          const demoToolbar = document.getElementById("demo-toolbar");
          if (!demoToolbar.contains(button)) {
            button.addEventListener("buttonClick", function (e) {
              console.log("Toolbar button clicked:", e.target);

              // Visual feedback for clicked button
              const originalColor = button.getAttribute("color") || "primary";

              // Brief highlight effect
              button.setAttribute("color", "success");
              setTimeout(() => {
                button.setAttribute("color", originalColor);
              }, 150);
            });
          }
        });

        // Initialize demo
        updateDemoToolbar();
      });

      // Make function global for HTML onchange attributes
      window.updateDemoToolbar = updateDemoToolbar;
    </script>
  </body>
</html>
